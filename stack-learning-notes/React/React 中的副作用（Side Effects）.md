# ğŸ“Œ React ä¸­çš„å‰¯ä½œç”¨ï¼ˆSide Effectsï¼‰  

## ğŸ§  ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ  

> **å‰¯ä½œç”¨** æ˜¯æŒ‡åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè®¿é—®æˆ–ä¿®æ”¹äº†å‡½æ•°ä½œç”¨åŸŸå¤–çš„äº‹ç‰©ã€‚

### âœ… å¸¸è§å‰¯ä½œç”¨åŒ…æ‹¬ï¼š

- æ“ä½œ DOM
    ä¾‹å¦‚ï¼š`ref.current.play()`ã€`document.title = "..."`
- å‘èµ·ç½‘ç»œè¯·æ±‚
    ä¾‹å¦‚ï¼š`fetch('/api')`
- è®¾ç½®å®šæ—¶å™¨
    ä¾‹å¦‚ï¼š`setTimeout`, `setInterval`
- æ—¥å¿—ã€å…¨å±€å˜é‡ä¿®æ”¹
    ä¾‹å¦‚ï¼š`console.log()`, `window.count++`

---

## ğŸ¯ React ä¸ºä»€ä¹ˆé™åˆ¶å‰¯ä½œç”¨ï¼Ÿ

React çš„ç»„ä»¶å‡½æ•°åº”è¯¥æ˜¯ï¼š
- **çº¯å‡½æ•°**ï¼ˆpure functionï¼‰ï¼šä¸äº§ç”Ÿå‰¯ä½œç”¨
- æ¯æ¬¡è°ƒç”¨åªè´Ÿè´£â€œç”Ÿæˆ JSXâ€ï¼Œä¸èƒ½å½±å“å¤–éƒ¨çŠ¶æ€æˆ–ç¯å¢ƒ  

è¿™æ ·å¯ä»¥ä¿è¯ï¼š
- æ¸²æŸ“ç»“æœå¯é¢„æµ‹
- æ€§èƒ½ä¼˜åŒ–å®¹æ˜“ï¼ˆå¦‚è·³è¿‡æ¸²æŸ“ã€å¹¶å‘æ¸²æŸ“ï¼‰

---

## âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆåœ¨ç»„ä»¶å‡½æ•°ä¸­ç›´æ¥æ“ä½œ DOMï¼‰

```jsx
function VideoPlayer({ isPlaying }) {
  const ref = useRef();
  if (isPlaying) {
    ref.current.play(); // âŒ å‰¯ä½œç”¨ï¼šä¸èƒ½åœ¨è¿™é‡Œæ“ä½œ DOM
  }
  return <video ref={ref} />;
}
```

---

## âœ… æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ `useEffect`

  

> useEffect æ˜¯ React æä¾›çš„ç”¨äºæ‰§è¡Œå‰¯ä½œç”¨çš„ Hookã€‚  
> å®ƒåœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆã€DOM å·²æŒ‚è½½ä¹‹åè¿è¡Œã€‚

```jsx
function VideoPlayer({ isPlaying }) {
  const ref = useRef();

  useEffect(() => {
    if (isPlaying) {
      ref.current?.play();
    } else {
      ref.current?.pause();
    }
  }, [isPlaying]); // âœ… ä¾èµ–äº isPlaying

  return <video ref={ref} />;
}
```

---

> [!NOTE]
> - **å‰¯ä½œç”¨ = æ”¹å˜å¤–éƒ¨ä¸–ç•Œçš„è¡Œä¸º**
> - React ä¸å…è®¸åœ¨ç»„ä»¶å‡½æ•°ä¸­æ‰§è¡Œå‰¯ä½œç”¨
> - å‰¯ä½œç”¨å¿…é¡»æ”¾åˆ° useEffect() ä¸­å¤„ç†