# React useState ä¸ setState å‡½æ•°è¯¦è§£ç¬”è®°ï¼ˆå«æ‰¹å¤„ç†é™·é˜±ï¼‰

## **ğŸ”° 1. `useState()` æ˜¯ React çš„çŠ¶æ€ Hook**

```jsx
const [state, setState] = useState(initialValue);
```

- `state` æ˜¯å½“å‰çŠ¶æ€å€¼
- `setState` æ˜¯ç”¨æ¥æ›´æ–°è¯¥çŠ¶æ€çš„å‡½æ•°ï¼ˆç”± React å†…éƒ¨ç”Ÿæˆï¼‰
- `initialValue` æ˜¯åˆå§‹å€¼ï¼Œåªåœ¨é¦–æ¬¡æ¸²æŸ“ä¸­ä½¿ç”¨

---

## **âš ï¸ 2. ä½ å‘½åçš„ `setState`ï¼ˆå¦‚ `setScore`ï¼‰ä¸æ˜¯ React å…¨å±€å†…ç½®å‡½æ•°ï¼Œè€Œæ˜¯ä½ é€šè¿‡è§£æ„å‘½åçš„**

```jsx
const [score, setScore] = useState(0);
```

- ä½ å¯ä»¥å‘½åä¸ºä»»æ„å˜é‡åï¼š

```jsx
const [banana, setBanana] = useState(0);
```

- React å†…éƒ¨å§‹ç»ˆä¼šè¿”å› [å€¼, æ›´æ–°å‡½æ•°]

---

## **âš™ï¸ 3. setState() çš„è¡Œä¸ºï¼šå¼‚æ­¥ & æ‰¹å¤„ç†**

- å®ƒä¸ä¼š**ç«‹åˆ»æ›´æ–°** `state`ï¼Œè€Œæ˜¯**å®‰æ’ä¸€æ¬¡å¼‚æ­¥æ›´æ–°**
- å¤šæ¬¡è°ƒç”¨ `setState(value)`ï¼ŒReact å¯èƒ½**æ‰¹å¤„ç†åˆå¹¶ä¸ºä¸€æ¬¡**
- æ‰€ä»¥ä½ ä¸èƒ½æœŸæœ›åœ¨å½“å‰å‡½æ•°é‡Œç«‹å³çœ‹åˆ°æ–°å€¼ï¼

---

## **ğŸ§ª 4. ç¤ºä¾‹è¯´æ˜ï¼šä¸ºä»€ä¹ˆå¤šæ¬¡ `increment()` æ²¡æœ‰ç”¨ï¼Ÿ**

### **é”™è¯¯ä»£ç ï¼š**

```jsx
function increment() {
  setScore(score + 1);
}

<button onClick={() => {
  increment();
  increment();
  increment();
}}>+3</button>
```

**ä½ ä»¥ä¸ºç»“æœæ˜¯ score + 3ï¼Œä½†å®é™…åªåŠ äº† 1ï¼**

### **â“åŸå› ï¼š**

- score + 1 æ˜¯åœ¨**å½“å‰å‡½æ•°ä½œç”¨åŸŸä¸­è®¡ç®—çš„å€¼**
- ä¸‰æ¬¡è°ƒç”¨éƒ½ä½¿ç”¨äº†**ç›¸åŒçš„ score å€¼**ï¼ˆæ¯”å¦‚éƒ½æ˜¯ 0ï¼‰
- æ‰€ä»¥ä¸‰æ¬¡ `setScore(score + 1)` éƒ½æ˜¯ `setScore(1)`
- React æ‰¹å¤„ç†åï¼Œåªä¿ç•™æœ€åä¸€æ¬¡ â†’ score = 1

---

## **âœ… æ­£ç¡®å†™æ³•ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°**

```jsx
setScore(prev => prev + 1);
```

è¿™æ ·æ¯æ¬¡é€’å¢éƒ½ä»¥â€œæœ€æ–°çš„ stateâ€ä¸ºåŸºç¡€ã€‚

### **ä¿®å¤åçš„ +3 æŒ‰é’®ï¼š**

```jsx
<button onClick={() => {
  setScore(s => s + 1);
  setScore(s => s + 1);
  setScore(s => s + 1);
}}>+3</button>
```

- æ¯æ¬¡éƒ½åŸºäºä¸Šä¸€æ¬¡çš„ score å€¼è¿›è¡Œæ›´æ–°
- æ‰€ä»¥æœ€ç»ˆç»“æœæ˜¯çœŸæ­£åœ° +3

---

## **âœ… æ€»ç»“å¯¹æ¯”**

| **å†™æ³•** | **æ˜¯å¦å®‰å…¨** | **è¯´æ˜** |
| --- | --- | --- |
| `setScore(score + 1)` | âŒ ä¸å®‰å…¨ | å¤šæ¬¡æ›´æ–°æ—¶å¯èƒ½é‡å¤å¼•ç”¨æ—§å€¼ |
| `setScore(s => s + 1)` | âœ… å®‰å…¨ | æ¯æ¬¡ä»¥æœ€æ–°å€¼ä¸ºåŸºç¡€è®¡ç®— |

---

## **ğŸ§  ä¸€å¥è¯æ€»ç»“ï¼š**

> `setScore(score + 1)` ä½¿ç”¨çš„æ˜¯å½“å‰ä½œç”¨åŸŸçš„æ—§å€¼ï¼Œä¸é€‚åˆè¿ç»­è°ƒç”¨ï¼›
> 

> è¦æƒ³ç¡®ä¿æ¯æ¬¡éƒ½åŸºäºâ€œæœ€æ–°çš„çŠ¶æ€å€¼â€ï¼Œåº”ä½¿ç”¨ setScore(prev => prev + 1) â€”â€” è¿™å°±æ˜¯å‡½æ•°å¼æ›´æ–°ï¼Œå®ƒèƒ½é¿å…çŠ¶æ€é—­åŒ…å¸¦æ¥çš„ bugï¼Œæ˜¯ React æ¨èçš„å†™æ³•ã€‚
>