# ğŸ“ Position & DOM Coordinate System ç¬”è®°æ€»ç»“

## **âœ… ä¸€ã€CSS ä¸­ position: absolute çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹**

### **1. absolute å®šä½å‚è€ƒè°ï¼Ÿ**

- é»˜è®¤ `position: static` ï¼Œæ ¹æ®é»˜è®¤çš„htmlæ’å¸ƒ
- ç»å¯¹å®šä½å…ƒç´ ï¼ˆposition: absoluteï¼‰ç›¸å¯¹äº**æœ€è¿‘ä¸€ä¸ªæœ‰å®šä½çš„ç¥–å…ˆå…ƒç´ **ï¼ˆå³è®¾ç½®äº† position: relative / absolute / fixed / sticky çš„å…ƒç´ ï¼‰æ¥å®šä½ã€‚
- è¿™æ„å‘³ç€å¦‚æœéœ€è¦è®©æŸä¸ªå…ƒç´ å¯ä»¥æ ¹æ®ä¸Šçº§å…ƒç´ å®šä½ï¼Œä¸Šçº§å…ƒç´ å¿…é¡»è¦è®¾ç½®positionï¼Œè‡³å°‘ä¸å¯ä»¥æ˜¯é»˜è®¤çš„static
- `position: relative` å¯ä»¥è®©å…ƒç´ è°ƒæ•´è‡ªèº«çš„ä½ç½®ã€‚ä¾‹å¦‚ `transform: translate (-50%, -50%)` å¦‚æœä¸è®¾ç½®relativeåˆ™æ— æ³•ç”Ÿæ•ˆã€‚æ­¤å¤–è®¾ç½®relativeå¯ä»¥å¸®åŠ©å­å…ƒç´ ä¾ç…§æœ¬å…ƒç´ å®šä½ï¼ˆå› ä¸ºè‡³å°‘ä¸æ˜¯staticï¼‰ã€‚

### **2. æ²¡æœ‰å®šä½ç¥–å…ˆï¼Ÿ**

- ä¼šç›¸å¯¹äº `<html>` å…ƒç´ ï¼ˆå³æ•´ä¸ªé¡µé¢ï¼‰å®šä½ã€‚

### **âœ… è®°å¿†å£è¯€ï¼š**

> â€œabsolute è¦é  relative å®šä½â€
> 

---

## **âœ… äºŒã€JavaScript è·å–åæ ‡æ–¹å¼**

### **1. `e.pageX` / `e.pageY`**

- é¼ æ ‡ç‚¹å‡»ç‚¹ç›¸å¯¹äº **æ•´ä¸ªé¡µé¢å·¦ä¸Šè§’**ï¼ˆå«æ»šåŠ¨ï¼‰çš„åæ ‡ã€‚

### **2. `e.clientX` / `e.clientY`**

- é¼ æ ‡ç‚¹å‡»ç‚¹ç›¸å¯¹äº **å½“å‰è§†å£ï¼ˆviewportï¼‰å·¦ä¸Šè§’** çš„åæ ‡ï¼Œ**ä¸åŒ…å«æ»šåŠ¨åç§»ã€‚**

### **3. `offsetTop` / `offsetLeft`**

- å½“å‰å…ƒç´ ç›¸å¯¹äº**æœ€è¿‘çš„ offsetParentï¼ˆæœ‰å®šä½å±æ€§çš„ç¥–å…ˆå…ƒç´ ï¼‰**å·¦ä¸Šè§’çš„ä½ç½®ã€‚
- æ˜¯ä¸€ä¸ªâ€œ**å±‚çº§å†…çš„ç›¸å¯¹ä½ç½®**â€ã€‚

```jsx
const buttonTop = e.target.offsetTop;
const buttonLeft = e.target.offsetLeft;
```

---

### **4. getBoundingClientRect()**

```jsx
const rect = e.target.getBoundingClientRect();
console.log(rect.top, rect.left);
```

- è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«å…ƒç´ è¾¹ç•Œä¿¡æ¯çš„å¯¹è±¡ã€‚
- **ç›¸å¯¹äºè§†å£ï¼ˆæµè§ˆå™¨å¯è§†åŒºåŸŸï¼‰å·¦ä¸Šè§’**ã€‚**ä¸åŒ…æ‹¬æ»šåŠ¨**
- åŒ…å«çš„å±æ€§æœ‰ï¼š
    - top / leftï¼šå…ƒç´ å·¦ä¸Šè§’ç›¸å¯¹è§†å£çš„ä½ç½®
    - width / heightï¼šå…ƒç´ å½“å‰å¯è§†å®½é«˜ï¼ˆåŒ…æ‹¬ç¼©æ”¾ã€æ»šåŠ¨ç­‰ï¼‰
    - bottom / rightï¼šå…ƒç´ å³ä¸‹è§’ç›¸å¯¹è§†å£ä½ç½®

---

## **ğŸ” `offsetTop` å¯¹æ¯” `getBoundingClientRect().top`**

| **å±æ€§** | **offsetTop** | **getBoundingClientRect().top** |
| --- | --- | --- |
| å‚è€ƒç‚¹ | offsetParent | è§†å£ï¼ˆviewportï¼‰ |
| ç²¾åº¦ | åªæ”¯æŒæ•´å‹ä½ç½® | è¿”å›æµ®ç‚¹æ•°ï¼ˆæ›´ç²¾å‡†ï¼‰ |
| æ¨èç”¨é€” | è®¡ç®—å…ƒç´ å†…éƒ¨ç›¸å¯¹åæ ‡ï¼ˆå¦‚æ”¾ç½®å­å…ƒç´ ï¼‰ | è®¡ç®—å…ƒç´ æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸä¸­ç­‰ |

---

### **âœ… ç¤ºä¾‹ï¼šæŒ‰é’®ç‚¹å‡»æ•ˆæœä¸­ç”¨å“ªä¸ªï¼Ÿ**

ä½ å¸Œæœ› ripple åŠ¨ç”»å‡ºç°åœ¨æŒ‰é’®ç‚¹å‡»çš„ä½ç½® â€”â€”

æœ€æ¨èç»„åˆæ˜¯ï¼š

```jsx
const { top, left } = e.target.getBoundingClientRect();
const xInside = e.clientX - left;
const yInside = e.clientY - top;
```

- clientX æ˜¯ç‚¹å‡»ç‚¹ç›¸å¯¹è§†å£ä½ç½®
- getBoundingClientRect() ç»™å‡ºæŒ‰é’®å·¦ä¸Šè§’ç›¸å¯¹è§†å£ä½ç½®
- ç›¸å‡å³å¯å¾—åˆ°ç‚¹å‡»ç‚¹åœ¨æŒ‰é’®å†…éƒ¨çš„ç²¾ç¡®åæ ‡

---

## **âœ… ä¸‰ã€æ¨èçš„äº‹ä»¶åæ ‡å¤„ç†æ–¹æ³•æ€»ç»“**

| **ç›®æ ‡** | **æ¨èæ–¹å¼** |
| --- | --- |
| è·å–ç‚¹å‡»ç‚¹åœ¨æ•´ä¸ªé¡µé¢çš„ä½ç½® | `e.pageX` / `e.pageY` |
| è·å–ç‚¹å‡»ç‚¹åœ¨è§†å£ä¸­çš„ä½ç½® | `e.clientX` / `e.clientY` |
| è·å–å…ƒç´ åœ¨è§†å£ä¸­çš„ä½ç½® | `element.getBoundingClientRect()` |
| è·å–å…ƒç´ åœ¨çˆ¶çº§ä¸­çš„ä½ç½® | `element.offsetTop` / `offsetLeft` |
| è·å–ç‚¹å‡»ç‚¹ç›¸å¯¹å…ƒç´ å†…éƒ¨ä½ç½® | `clientX - rect.left` / `clientY - rect.top` |
